# 接口说明

## 登录，注册，登出

登录：`/login?user=<username>&pd=<password_salt_md5>`

* password_salt_md5：？？？
* 返回值：`'success'`（admin）

## ApiKey操作

读取：`/api/list`

* 返回值：`{<model_name1> : <api_key1>, ...}`

添加或覆盖式修改：`/api/add?name=<model_name>&key=<key>`

* key：base64编码后的api_key
* 返回值：`'success'`或`'invalid_user'`

删除：`/api/del?name=<name>`

* 返回值：`'success'`或`'invalid_user'`或`'invalid_model_name'`

## 聊天操作

读取历史：`/chat/list`

* 返回值：`{<chat_id1> : <chat_title1>, ...}`或`'invalid_user'`
  
删除历史：`/chat/del?cid=<chat_id>`

* 返回值：`'success'`或`'invalid_user'`或`'chat_not_exist'`

读取一次聊天历史：`/chat/get?cid=<chat_id>`

* 返回值：`[<prompt1>, <answer1>, ...]`或`'invalid_user'`或`'chat_not_exist'`

创建聊天：`/chat/new`

* 返回值：`<chat_id>`或`'invalid_user'`

生成回答：`/chat/gen?cid=<chat_id>&p=<prompt>&ml=<used_model_list>`

* prompt：base64编码后的问题
* used_model_list：base64编码后的`[<model_name1>, ...]`
* 返回值：`{<model_name1> : <answer1>, ...}`或`'invalid_user'`或`'chat_not_exist'`

固定回答：`/chat/sel?cid=<chat_id>&name=<model_name>`

* 返回值：`'success'`或`'invalid_user'`或`'chat_not_exist'`

重新生成回答（切换模型）：`/chat/regen?cid=<chat_id>&ml=<used_model_list>`

* 服务器会缓存所有gen/regen的回答，可以直接通过sel选取
* used_model_list：base64编码后的`[<model_name1>, ...]`
* 返回值：`[<answer1>, ...]`或`'invalid_user'`或`'chat_not_exist'`
